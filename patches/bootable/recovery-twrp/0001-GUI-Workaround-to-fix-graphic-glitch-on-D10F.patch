From bbb67e41c0d0086989142eaefae4dcebfb2f588f Mon Sep 17 00:00:00 2001
From: S-trace <S-trace@list.ru>
Date: Wed, 13 Jan 2016 01:27:40 +0300
Subject: [PATCH] [GUI] Workaround to fix graphic glitch on D10F

Change-Id: Iee995a5e883be457524ed9009ceda81f24177169
---
 minuitwrp/graphics.c | 6 ++++++
 1 file changed, 6 insertions(+)

diff --git a/minuitwrp/graphics.c b/minuitwrp/graphics.c
index fb86c14..95d10a2 100644
--- a/minuitwrp/graphics.c
+++ b/minuitwrp/graphics.c
@@ -184,6 +184,12 @@ static int get_framebuffer(GGLSurface *fb)
         return -1;
     }
 
+    // S-trace: workaround to fix werid graphics on D10F
+    if (vi.xres_virtual == 720) {
+        vi.xres_virtual+=16;
+        fprintf(stderr, "Correcting vi.xres_virtual: 720->%d\n", vi.xres_virtual);
+    }
+
     fprintf(stderr, "Pixel format: %dx%d @ %dbpp\n", vi.xres, vi.yres, vi.bits_per_pixel);
 
     vi.bits_per_pixel = PIXEL_SIZE * 8;
-- 
2.5.0

